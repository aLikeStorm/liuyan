<!DOCTYPE html><html><head>    <!-- 页面meta -->    <meta charset="utf-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <title>留言首页</title>    <link rel="stylesheet" href="./css/index.css">    <!-- 引入组件库 -->    <script src="./js/vue.js"></script>    <script src="./js/axios-0.18.0.js"></script>    <script src="./plugins/element-ui/lib/index.js"></script>    <link rel="stylesheet" href="./plugins/element-ui/lib/theme-chalk/index.css"></head><body><div id="app">    <el-container>        <el-header>            <h1>留言簿首页</h1><br/>            <el-tag type="info">{{dateStr}}</el-tag> <br/>        </el-header>        <el-main>                <div class="div1">                    <a class="a1">公告： {{announcement}}</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                    <el-link type="success" href="liuyan.html">去留言</el-link>                    <el-link type="warning" href="login.html">登陆</el-link>                    <el-link type="danger" @click="logout">登出</el-link>                </div>                <div class="div2">                <el-table                        :data="messageList"                        border                        style="width: 100%"                        @row-onclick(id)>                    <el-table-column                            prop="topic"                            label="主题"                            width="180">                        <template slot-scope="scope">                            <div @click="findDetail(scope.row.mid)">{{scope.row.topic }}</div>                        </template>                    </el-table-column>                    <el-table-column                            prop="username"                            label="发布人"                            width="180">                    </el-table-column>                    <el-table-column                            prop="replyNum"                            label="回复数">                    </el-table-column>                    <el-table-column                            prop="views"                            label="浏览量">                    </el-table-column>                    <el-table-column                            prop="lastReplyName"                            label="最新回复人">                    </el-table-column>                    <el-table-column                            prop="lastUpdateTime"                            label="最新回复时间">                    </el-table-column>                </el-table>            </div>        </el-main>        <el-footer>            Footer        </el-footer>    </el-container></div><style>    #gundong{        animation: fadenum 5s infinite;    }    .div1{        height: 20px;        width: 1300px;    }    .div2{        height: 500px;        width: 1300px;    }    .a1{        color: #0abdfe;    }</style></body><script>    var vue = new Vue({        el: '#app',        data:{            dateStr:"",            messageList:[],            messageFrom:{                type:0,//根据发布人还是主题                info:"",//信息                sort:2 //排序规则：0回复数量，1浏览量，2发布时间            },            messageDetailList:{                message:null,                replyList:[]            },            announcement:""        },        //钩子函数，VUE对象初始化完成后自动执行        created() {            this.getAll();            this.getNowDate();        },        methods: {            getNowDate() {                // 创建一个日期对象                date = new Date();                // 获取当前年 需要加上1900                var year = date.getYear() + 1900;                // 当前月 需要加上1                var month = date.getMonth() + 1;                // 当前日                var day = date.getDate();                // 当前星期                // 说明：getDay返回一个数字，这个数字就是在下方列表的其中一个索引                var weekdayList = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];                var weekday = weekdayList[date.getDay()];                // 当前时                var hours = date.getHours();                // 当前分                var minutes = date.getMinutes();                // 当前秒                var seconds = date.getSeconds();                // 由于字符串太长 分为两段来写，效果是一样的                var write_content = "当前时间：" + year + "年" + month + "月" + day + "日" + weekday;                // 说明：" "是空格，用来隔开星期和小时                write_content = write_content +  " " + hours + "时" + minutes + "分" + seconds + "秒";                this.dateStr = write_content;            },            //查询所有留言            getAll() {                const  that = this;                //发送异步请求                axios.post("/message/findAll",this.messageFrom).then((res)=>{                    if (res.data.success){                        that.messageList = res.data.data;                    }else {                        that.$message.error(res.data.errorMsg);                    }                })                this.getAnnouncement();            },            findDetail(id){                alert(id)                const that = this;                sessionStorage.setItem("mid", id); // 存                location.href="liuyan.html";            },            //退出登录            logout(){                const that = this;                axios.get("/user/logout").then(function (res) {                    if (res.data.success){                        that.$message.success("已退出登录！")                        setTimeout(() => { window.location.href="login.html";},3000)                    }else {                        that.$message.error("服务器异常！")                    }                });            },            getAnnouncement() {                const that = this;                axios.get("/user/announcement").then(function (res) {                    if (res.data.success){                        that.announcement = res.data.data;                    }else {                        that.$message.error("服务器异常！")                    }                });            }        }    })</script></html>